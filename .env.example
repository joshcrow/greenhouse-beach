# =============================================================================
# GREENHOUSE GAZETTE - Environment Configuration
# =============================================================================
# SETUP INSTRUCTIONS:
#   1. Copy this file: cp .env.example .env
#   2. Fill in all values marked with YOUR_*
#   3. NEVER commit .env to git (it's already in .gitignore)
#
# REQUIRED SECRETS (must be set for production):
#   - GEMINI_API_KEY
#   - OPENWEATHER_API_KEY
#   - MQTT_PASSWORD
#   - SMTP_PASSWORD
# =============================================================================

# -----------------------------------------------------------------------------
# CORE SETTINGS
# -----------------------------------------------------------------------------
# Site identification
GREENHOUSE_SITE_NAME="Outer Banks Greenhouse"

# Timezone (for scheduling daily emails at 7:00 AM local)
TZ=America/New_York

# -----------------------------------------------------------------------------
# MQTT BROKER (Required)
# -----------------------------------------------------------------------------
# Connection to Mosquitto broker (container name in Docker network)
MQTT_HOST=mosquitto
MQTT_PORT=1883
MQTT_USERNAME=greenhouse

# Generate: openssl rand -base64 24
# Must match the password in configs/passwd
MQTT_PASSWORD=YOUR_STRONG_MQTT_PASSWORD

# -----------------------------------------------------------------------------
# AI NARRATIVE ENGINE - Google Gemini (Required)
# -----------------------------------------------------------------------------
# Get API key: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=YOUR_GEMINI_API_KEY

# Model selection (gemini-2.5-flash recommended for speed/cost)
GEMINI_MODEL=gemini-2.5-flash

# -----------------------------------------------------------------------------
# WEATHER SERVICE - OpenWeatherMap (Required)
# -----------------------------------------------------------------------------
# Get API key: https://openweathermap.org/api (One Call 3.0)
OPENWEATHER_API_KEY=YOUR_OPENWEATHER_API_KEY

# Greenhouse location coordinates (Outer Banks, NC default)
LAT=36.022
LON=-75.720

# -----------------------------------------------------------------------------
# EMAIL DISPATCH - Gmail SMTP (Required)
# -----------------------------------------------------------------------------
# Gmail SMTP settings (use App Password, not regular password)
# Create App Password: Google Account > Security > 2FA > App passwords
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=465
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=YOUR_GMAIL_APP_PASSWORD

# Email addresses
SMTP_FROM="Greenhouse Gazette <your-email@gmail.com>"
SMTP_TO=recipient@example.com

# -----------------------------------------------------------------------------
# DATA PATHS (Docker internal - usually don't change)
# -----------------------------------------------------------------------------
STATUS_PATH=/app/data/status.json
STATS_24H_PATH=/app/data/stats_24h.json
STATS_WEEKLY_PATH=/app/data/stats_weekly.json
HISTORY_CACHE_PATH=/app/data/history_cache.json
ARCHIVE_PATH=/app/data/archive
INCOMING_PATH=/app/data/incoming

# -----------------------------------------------------------------------------
# OPTIONAL: Advanced Settings
# -----------------------------------------------------------------------------
# Resolution target for image processing (1080p recommended for Pi)
RESOLUTION_TARGET=1080p

# Status daemon write interval (seconds)
STATUS_WRITE_INTERVAL=60

# =============================================================================
# QUICK SETUP COMMANDS
# =============================================================================
# Generate MQTT password:
#   openssl rand -base64 24
#
# Create Mosquitto password file:
#   docker run --rm -v $(pwd)/configs:/mosquitto/config eclipse-mosquitto:2 \
#     mosquitto_passwd -c /mosquitto/config/passwd greenhouse
#
# Test email configuration:
#   docker compose exec storyteller python -c "
#     import os, smtplib, ssl
#     ctx = ssl.create_default_context()
#     with smtplib.SMTP_SSL(os.getenv('SMTP_SERVER'), 465, context=ctx) as s:
#         s.login(os.getenv('SMTP_USER'), os.getenv('SMTP_PASSWORD'))
#         print('SMTP OK')
#   "
# =============================================================================
